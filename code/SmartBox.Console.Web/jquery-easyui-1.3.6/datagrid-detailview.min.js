var detailview=$.extend({},$.fn.datagrid.defaults.view,{render:function(n,t,i){var h=$.data(n,"datagrid"),f=h.options,u;if(!i||f.rownumbers||f.frozenColumns&&f.frozenColumns.length){var o=h.data.rows,c=$(n).datagrid("getColumnFields",i),r=[];for(r.push('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'),u=0;u<o.length;u++){var e=f.rowStyler?f.rowStyler.call(n,u,o[u]):"",l="",s="";typeof e=="string"?s=e:e&&(l=e["class"]||"",s=e.style||"");var a='class="datagrid-row '+(u%2&&f.striped?"datagrid-row-alt ":" ")+l+'"',v=s?'style="'+s+'"':"",y=h.rowIdPrefix+"-"+(i?1:2)+"-"+u;r.push('<tr id="'+y+'" datagrid-row-index="'+u+'" '+a+" "+v+">"),r.push(this.renderRow.call(this,n,c,i,u,o[u])),r.push("<\/tr>"),r.push('<tr style="display:none;">'),i?r.push("<td colspan="+(c.length+2)+' style="border-right:0">'):r.push("<td colspan="+c.length+">"),r.push('<div class="datagrid-row-detail">'),i?r.push("&nbsp;"):r.push(f.detailFormatter.call(n,u,o[u])),r.push("<\/div>"),r.push("<\/td>"),r.push("<\/tr>")}r.push("<\/tbody><\/table>"),$(t).html(r.join(""))}},renderRow:function(n,t,i,r,u){var s=$.data(n,"datagrid").options,e=[],y,a,c,f,w,o;for(i&&s.rownumbers&&(y=r+1,s.pagination&&(y+=(s.pageNumber-1)*s.pageSize),e.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+y+"<\/div><\/td>")),a=0;a<t.length;a++)if(c=t[a],f=$(n).datagrid("getColumnOption",c),f){var l=u[c],v=f.styler?f.styler(l,u,r)||"":"",p="",h="";typeof v=="string"?h=v:e&&(p=v["class"]||"",h=v.style||""),w=p?'class="'+p+'"':"",o=f.hidden?'style="display:none;'+h+'"':h?'style="'+h+'"':"",e.push('<td field="'+c+'" '+w+" "+o+">"),f.checkbox?o="":f.expander?o="text-align:center;height:16px;":(o=h,f.align&&(o+=";text-align:"+f.align+";"),s.nowrap?s.autoRowHeight&&(o+=";height:auto;"):o+=";white-space:normal;height:auto;"),e.push('<div style="'+o+'" '),f.checkbox?e.push('class="datagrid-cell-check '):e.push('class="datagrid-cell '+f.cellClass),e.push('">'),f.checkbox?e.push('<input type="checkbox" name="'+c+'" value="'+(l!=undefined?l:"")+'">'):f.expander?e.push('<span class="datagrid-row-expander datagrid-row-expand" style="display:inline-block;width:16px;height:16px;cursor:pointer;" />'):f.formatter?e.push(f.formatter(l,u,r)):e.push(l),e.push("<\/div>"),e.push("<\/td>")}return e.join("")},insertRow:function(n,t,i){function e(r){var c=r?s:h,e=c.find("tr[datagrid-row-index="+t+"]"),u;f?(u=e.next().clone(),e.insertAfter(e.next())):u=e.next().next().clone(),u.insertAfter(e),u.hide(),r||u.find("div.datagrid-row-detail").html(o.detailFormatter.call(n,t,i))}var o=$.data(n,"datagrid").options,u=$.data(n,"datagrid").dc,c=$(n).datagrid("getPanel"),s=u.view1,h=u.view2,f=!1,r=$(n).datagrid("getRows").length;if(r==0){$(n).datagrid("loadData",{total:1,rows:[i]});return}(t==undefined||t==null||t>=r)&&(t=r,f=!0,this.canUpdateDetail=!1),$.fn.datagrid.defaults.view.insertRow.call(this,n,t,i),e(!0),e(!1),this.canUpdateDetail=!0},deleteRow:function(n,t){var i=$.data(n,"datagrid").options,r=$.data(n,"datagrid").dc,u=i.finder.getTr(n,t);u.next().remove(),$.fn.datagrid.defaults.view.deleteRow.call(this,n,t),r.body2.triggerHandler("scroll")},updateRow:function(n,t,i){var e=$.data(n,"datagrid").dc,u=$.data(n,"datagrid").options,f=$(n).datagrid("getExpander",t).attr("class"),i,r;$.fn.datagrid.defaults.view.updateRow.call(this,n,t,i),$(n).datagrid("getExpander",t).attr("class",f),this.canUpdateDetail&&(i=$(n).datagrid("getRows")[t],r=$(n).datagrid("getRowDetail",t),r.html(u.detailFormatter.call(n,t,i)))},bindEvents:function(n){var i=$.data(n,"datagrid"),r=i.dc,f=i.options,t=r.body1.add(r.body2),u=($.data(t[0],"events")||$._data(t[0],"events")).click[0].handler;t.unbind("click").bind("click",function(t){var i=$(t.target),f=i.closest("tr.datagrid-row"),r;f.length&&(i.hasClass("datagrid-row-expander")?(r=parseInt(f.attr("datagrid-row-index")),i.hasClass("datagrid-row-expand")?$(n).datagrid("expandRow",r):$(n).datagrid("collapseRow",r),$(n).datagrid("fixRowHeight")):u(t),t.stopPropagation())})},onBeforeRender:function(n){for(var f=$.data(n,"datagrid"),i=f.options,c=f.dc,t=$(n),e=!1,o=t.datagrid("getColumnFields",!0).concat(t.datagrid("getColumnFields")),s,u,h,r=0;r<o.length;r++)if(s=t.datagrid("getColumnOption",o[r]),s.expander){e=!0;break}e||(i.frozenColumns&&i.frozenColumns.length?i.frozenColumns[0].splice(0,0,{field:"_expander",expander:!0,width:24,resizable:!1,fixed:!0}):i.frozenColumns=[[{field:"_expander",expander:!0,width:24,resizable:!1,fixed:!0}]],t=c.view1.children("div.datagrid-header").find("table"),u=$('<td rowspan="'+i.frozenColumns.length+'"><div class="datagrid-header-expander" style="width:24px;"><\/div><\/td>'),$("tr",t).length==0?u.wrap("<tr><\/tr>").parent().appendTo($("tbody",t)):i.rownumbers?u.insertAfter(t.find("td:has(div.datagrid-header-rownumber)")):u.prependTo(t.find("tr:first"))),h=this,setTimeout(function(){h.bindEvents(n)},0)},onAfterRender:function(n){function u(){var n=r.view2.children("div.datagrid-header").find("table").width();r.body2.children("table").width(n)}var e=this,t=$.data(n,"datagrid"),r=t.dc,i=t.options,f=$(n).datagrid("getPanel");$.fn.datagrid.defaults.view.onAfterRender.call(this,n),t.onResizeColumn||(t.onResizeColumn=i.onResizeColumn),t.onResize||(t.onResize=i.onResize),i.onResizeColumn=function(i,r){var e,f;for(u(),e=$(n).datagrid("getRows").length,f=0;f<e;f++)$(n).datagrid("fixDetailRowHeight",f);t.onResizeColumn.call(n,i,r)},i.onResize=function(n,i){u(),t.onResize.call(f,n,i)},this.canUpdateDetail=!0,r.footer1.find("span.datagrid-row-expander").css("visibility","hidden"),$(n).datagrid("resize")}});$.extend($.fn.datagrid.methods,{fixDetailRowHeight:function(n,t){return n.each(function(){var n=$.data(this,"datagrid").options,u;if(n.rownumbers||n.frozenColumns&&n.frozenColumns.length){var f=$.data(this,"datagrid").dc,r=n.finder.getTr(this,t,"body",1).next(),i=n.finder.getTr(this,t,"body",2).next();i.is(":visible")&&(r.css("height",""),i.css("height",""),u=Math.max(r.height(),i.height()),r.css("height",u),i.css("height",u)),f.body2.triggerHandler("scroll")}})},getExpander:function(n,t){var i=$.data(n[0],"datagrid").options;return i.finder.getTr(n[0],t).find("span.datagrid-row-expander")},getRowDetail:function(n,t){var i=$.data(n[0],"datagrid").options,r=i.finder.getTr(n[0],t,"body",2);return r.next().find("div.datagrid-row-detail")},expandRow:function(n,t){return n.each(function(){var n=$(this).datagrid("options"),e=$.data(this,"datagrid").dc,i=$(this).datagrid("getExpander",t),r,u,f;i.hasClass("datagrid-row-expand")&&(i.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse"),r=n.finder.getTr(this,t,"body",1).next(),u=n.finder.getTr(this,t,"body",2).next(),r.show(),u.show(),$(this).datagrid("fixDetailRowHeight",t),n.onExpandRow&&(f=$(this).datagrid("getRows")[t],n.onExpandRow.call(this,t,f)))})},collapseRow:function(n,t){return n.each(function(){var n=$(this).datagrid("options"),e=$.data(this,"datagrid").dc,i=$(this).datagrid("getExpander",t),r,u,f;i.hasClass("datagrid-row-collapse")&&(i.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand"),r=n.finder.getTr(this,t,"body",1).next(),u=n.finder.getTr(this,t,"body",2).next(),r.hide(),u.hide(),e.body2.triggerHandler("scroll"),n.onCollapseRow&&(f=$(this).datagrid("getRows")[t],n.onCollapseRow.call(this,t,f)))})}});
//@ sourceMappingURL=datagrid-detailview.min.js.map